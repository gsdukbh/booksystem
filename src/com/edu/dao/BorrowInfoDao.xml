<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edu.dao.BorrowInfoDao">
     <!--查看所有借阅信息-->
    <select id="findAllBorrowMsg" resultType="BorrowInfo" >
        select * from  borrowinfo
    </select>
    <!--多条件查询-->
    <!--包括借阅id,图书id-->
    <select id="findBorrowMsgById" parameterType="String" resultType="BorrowInfo">
      select * from   borrowinfo
        <where>
            <if test="borrowID !=null and borrowID !=''">
                <bind name="borrowID" value="'%'+_parameter.getBorrowID()+'%'" />
             and  borrowID=#{borrowID}
            </if>
            <if test="bookId !=null and bookId !=''">
                <bind name="bookId" value="'%'+_parameter.getBookId()+'%'" />
                and  bookId=#{bookId}
            </if>
        </where>
    </select>
    <!--增加借阅信息-->
    <insert id="addBorrowMsg" parameterType="BorrowInfo"  >
        insert into  borrowinfo(borrowID,bookId,borrowRenewDay,borrowRemandDay,borrowPenalty,borrowstatus) 
        values(${borrowID},${bookId},${borrowRenewDay},${borrowRemandDay},${borrowPenalty},${borrowstatus})  
    </insert>
    <!--修改信息-->
    <update id="upBorrowMsg" parameterType="BorrowInfo"  >
        update borrowinfo
        <set>
            <if test="borrowRenewDay !=null and borrowRenewDay !=''">
                borrowRenewDay=#{borrowRenewDay}
            </if>
            <if test="borrowRemandDay !=null and borrowRemandDay !=''">
                borrowRemandDay=#{borrowRemandDay}
            </if>
            <if test="borrowPenalty !=null and borrowPenalty !=''">
                borrowPenalty=#{borrowPenalty}
            </if>
            <if test="borrowstatus !=null and borrowstatus !=''">
                borrowstatus=#{borrowstatus}
            </if>
        </set>
            where  borrowID=#{borrowID} and bookId=#{bookId}
    </update>
    <!--删除信息通过id-->
    <delete id="delBorrowMsgByid" parameterType="String" >
        delete from  borrowinfo
        <where>
            <if test="borrowID !=null and borrowID !='' ">
                and borrowID =#{borrowID}
            </if>
            <if test="bookId !=null and bookId !='' ">
                and bookId =#{bookId}
            </if>
        </where>
    </delete>
</mapper>
